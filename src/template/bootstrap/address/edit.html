<!--
	作者：xuyuanxiang@tjpower.com.cn
	时间：2014-07-30
	描述：配送地址新增/编辑
	Controller: address/edit_controller.js
	路由：index.html#/address/edit
-->
<form name="addressEditForm" ng-submit="addressEditFormSubmit()">
    <header>
        <a href="#/address?from={{from}}&params={{params}}" class="btn btn-default left">
            返回
        </a>
        <img src="img/logo.png" alt="ohFresh探鲜家">
        <button type="submit" class="btn btn-default right">
            保存
        </button>
    </header>


    <div class="container-fluid">
        <div class="form-group" ng-init="mobileHasInput=false"
             ng-class="mobileHasInput?(!addressEditForm.mobilephone.$valid?'has-feedback has-error':'has-feedback has-success'):''">
            <label>{{'MOBILE' | translate}}</label>
            <label ng-show="mobileHasInput && addressEditForm.mobilephone.$error.required"
                   class="control-label">
                <small>{{'REQUIRED' | translate}}</small>
            </label>
            <input autofocus type="tel" name="mobilephone" class="form-control" tabindex="1"
                   ng-model="address.mobilephone"
                   ng-required="true"
                   ng-blur="mobileHasInput=true"
                   ng-pattern="/^1[0-9]{10,11}$/"/>

            <p ng-show="mobileHasInput && !addressEditForm.mobilephone.$valid"
               class="help-block">
                {{'MOBILE_INVALID' | translate}}
            </p>
                    <span class="form-control-feedback"
                          ng-class="mobileHasInput?(!addressEditForm.mobilephone.$valid?'glyphicon glyphicon-remove':'glyphicon glyphicon-ok'):''"></span>
        </div>
        <!-- ./mobile input -->
        <div class="form-group" ng-init="nameHasInput=false"
             ng-class="nameHasInput?(addressEditForm.name.$valid?'has-feedback has-success':'has-feedback has-error'):''">
            <label>{{'TRUE_NAME' | translate}}</label>
            <label ng-show="nameHasInput && addressEditForm.name.$error.required"
                   class="control-label">
                <small>{{'REQUIRED' | translate}}</small>
            </label>
            <input type="text" class="form-control" name="name" tabindex="2"
                   ng-required="true" ng-blur="nameHasInput=true"
                   ng-model="address.name"
                   ng-pattern="/(?:[\u4E00-\u9FFF]{1,8}·\u4E00-\u9FFF]{1,8})|(?:[\u4E00-\u9FFF]{2,5})|(^[a-zA-Z]{1,30}$)/"/>

            <p ng-show="nameHasInput && !addressEditForm.name.$valid" class="help-block">
                {{'TRUE_NAME_INVALID' | translate}}</p>
                    <span class="form-control-feedback"
                          ng-class="nameHasInput?(addressEditForm.name.$valid?'glyphicon glyphicon-ok':'glyphicon glyphicon-remove'):''"></span>
        </div>
        <!-- ./true_name input -->


        <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div ng-show="countries.length>0" class="form-group">
                    <label>{{'COUNTRY' | translate}}</label>
                    <select name="country" tabindex="5"
                            class="form-control"
                            ng-model="address.country"
                            ng-change="countryChange(address.country)"
                            ng-options="item.name for item in countries"></select>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                <div ng-show="provinces.length>0" class="form-group">
                    <label>{{'PROVINCE' | translate}}</label>
                    <select name="country" tabindex="6"
                            class="form-control"
                            ng-model="address.province"
                            ng-change="provinceChange(address.province)"
                            ng-options="item.name for item in provinces"></select>
                </div>
            </div>
        </div>
        <div ng-show="cities.length>0" class="form-group">
            <label>{{'CITY' | translate}}</label>
            <select name="city" tabindex="7"
                    class="form-control"
                    ng-model="address.city"
                    ng-change="cityChange(address.city)"
                    ng-options="item.name for item in cities"></select>
        </div>
        <div ng-show="counties.length>0" class="form-group">
            <label>{{'COUNTY' | translate}}</label>
            <select name="county" tabindex="8"
                    class="form-control"
                    ng-model="address.county"
                    ng-change="countyChange(address.county)"
                    ng-options="item.name for item in counties"></select>
        </div>
        <div class="form-group">
            <label>{{'ADDRESS'|translate}}</label>
            <textarea tabindex="5"
                      ng-required="true"
                      ng-model="address.assemblename" class="form-control"></textarea>
        </div>
    </div>
</form>